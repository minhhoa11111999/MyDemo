<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timing System - Admin Professional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; scroll-behavior: smooth; }
        .hidden { display: none; }
        .nav-active { @apply bg-indigo-600 text-white shadow-lg shadow-indigo-200; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <div id="main-admin" class="min-h-screen flex">
        <aside class="w-64 bg-slate-900 text-white flex flex-col fixed h-full">
            <div class="p-8 text-xl font-bold text-indigo-400 italic border-b border-slate-800 text-center tracking-widest">TIMING PRO</div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <button onclick="showSection('dashboard')" id="btn-dashboard" class="nav-btn w-full flex items-center p-4 rounded-2xl nav-active transition">
                    <i class="fas fa-chart-pie w-5"></i> <span class="ml-3 font-semibold text-sm">Dashboard</span>
                </button>
                <button onclick="showSection('participants')" id="btn-participants" class="nav-btn w-full flex items-center p-4 rounded-2xl text-slate-400 hover:bg-slate-800 transition">
                    <i class="fas fa-running w-5"></i> <span class="ml-3 font-semibold text-sm">Kết quả thi đấu</span>
                </button>
                <button onclick="showSection('qr-view')" id="btn-qr-view" class="nav-btn w-full flex items-center p-4 rounded-2xl text-slate-400 hover:bg-slate-800 transition">
                    <i class="fas fa-qrcode w-5"></i> <span class="ml-3 font-semibold text-sm">Mã QR Hệ thống</span>
                </button>
            </nav>
        </aside>

        <div class="flex-1 ml-64 flex flex-col min-h-screen">
            <header class="bg-white border-b p-5 px-8 flex justify-between items-center sticky top-0 z-10">
                <h2 id="page-title" class="text-lg font-bold text-slate-800 uppercase italic tracking-wider">Dashboard Overview</h2>
                <div class="flex items-center space-x-4">
                    <span class="text-xs font-medium text-slate-400">Cập nhật: 14:30:38</span>
                    <div class="bg-emerald-50 text-emerald-600 border border-emerald-100 px-3 py-1.5 rounded-full text-[10px] font-bold">LIVE MODE</div>
                </div>
            </header>

            <main class="p-8 space-y-8">
                
                <div id="sec-dashboard" class="space-y-6 animate-in fade-in duration-500">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                            <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Tổng VĐV</p>
                            <h3 class="text-4xl font-bold text-slate-800 mt-1" id="stat-total">12</h3>
                        </div>
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
                            <p class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Hoàn thành</p>
                            <h3 class="text-4xl font-bold text-emerald-600 mt-1" id="stat-valid">9</h3>
                        </div>
                        <div class="lg:col-span-2 bg-indigo-600 rounded-[32px] p-6 text-white flex items-center justify-between shadow-xl shadow-indigo-100">
                            <div>
                                <h4 class="text-lg font-bold italic underline decoration-indigo-400">Tỷ lệ hoàn thành</h4>
                                <div class="mt-4 flex space-x-6">
                                    <div><span class="block text-2xl font-bold text-white">75%</span><span class="text-[10px] uppercase text-indigo-200 tracking-widest">Thành công</span></div>
                                    <div class="border-l border-indigo-400 pl-6"><span class="block text-2xl font-bold text-white">25%</span><span class="text-[10px] uppercase text-indigo-200 tracking-widest">DNF / Lỗi</span></div>
                                </div>
                            </div>
                            <div class="relative w-24 h-24 flex items-center justify-center bg-indigo-500 rounded-full border-4 border-indigo-400 shadow-inner">
                                <span class="text-xl font-bold italic">75%</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100 space-y-6">
                            <div>
                                <h3 class="font-bold text-slate-700 mb-4 flex items-center italic text-sm">
                                    <i class="fas fa-trophy text-yellow-500 mr-2"></i> TOP 5 VỀ ĐÍCH SỚM NHẤT
                                </h3>
                                <div id="top-5-list" class="space-y-2"></div>
                            </div>
                            <div class="pt-4 border-t border-slate-50">
                                <h3 class="font-bold text-slate-400 mb-4 flex items-center text-xs uppercase tracking-widest">
                                    Tiếp theo (Rank 6-10)
                                </h3>
                                <div id="next-5-list" class="space-y-2 opacity-70"></div>
                            </div>
                        </div>

                        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100 flex flex-col h-full">
                            <h3 class="font-bold text-rose-600 mb-6 flex items-center italic text-sm">
                                <i class="fas fa-user-slash mr-2"></i> DANH SÁCH VI PHẠM / CHƯA HOÀN THÀNH
                            </h3>
                            <div id="violation-list" class="space-y-3 overflow-y-auto pr-2 custom-scrollbar" style="max-height: 400px;">
                                </div>
                            <div class="mt-auto pt-6 text-center">
                                <p class="text-[10px] text-slate-400 uppercase font-bold tracking-widest underline cursor-pointer hover:text-indigo-600">Xem tất cả báo cáo hệ thống</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="sec-participants" class="hidden animate-in slide-in-from-right-4 duration-500">
                    <div class="bg-white rounded-[32px] shadow-sm border border-slate-100 overflow-hidden flex flex-col">
                        <div class="p-6 border-b flex justify-between items-center bg-slate-50/50">
                            <h3 class="font-bold text-slate-800 uppercase text-xs tracking-widest">Bảng dữ liệu tổng hợp (Phase 1)</h3>
                            <button onclick="exportCSV()" class="bg-slate-900 text-white px-6 py-2 rounded-xl text-[10px] font-bold hover:bg-indigo-600 transition">XUẤT FILE CSV</button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="bg-slate-900 text-white text-[10px] uppercase font-bold tracking-widest">
                                    <tr>
                                        <th class="p-5 px-8">STT</th>
                                        <th class="p-5">Vận động viên</th>
                                        <th class="p-5 text-center">Start</th>
                                        <th class="p-5 text-center">Checkpoint</th>
                                        <th class="p-5 text-center">Finish</th>
                                        <th class="p-5 text-right italic">Tổng thời gian</th>
                                        <th class="p-5 text-center uppercase">Trạng thái</th>
                                    </tr>
                                </thead>
                                <tbody id="full-table-body" class="divide-y divide-slate-100 text-xs"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="sec-qr-view" class="hidden animate-in zoom-in-95 duration-300 text-center">
                    <div class="max-w-4xl mx-auto bg-white p-12 rounded-[40px] shadow-sm border border-slate-100">
                        <h3 class="text-2xl font-bold mb-12 italic">Mã QR Định Danh Sự Kiện</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                            <div class="space-y-4 group">
                                <div class="bg-slate-50 p-6 rounded-3xl border-2 border-transparent group-hover:border-indigo-600 transition-all"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=START" class="mx-auto"></div>
                                <p class="font-bold text-indigo-600 text-xs tracking-widest uppercase">1. START</p>
                            </div>
                            <div class="space-y-4 group">
                                <div class="bg-slate-50 p-6 rounded-3xl border-2 border-transparent group-hover:border-orange-500 transition-all"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=CP" class="mx-auto"></div>
                                <p class="font-bold text-orange-500 text-xs tracking-widest uppercase">2. CHECKPOINT</p>
                            </div>
                            <div class="space-y-4 group">
                                <div class="bg-slate-50 p-6 rounded-3xl border-2 border-transparent group-hover:border-emerald-500 transition-all"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=FINISH" class="mx-auto"></div>
                                <p class="font-bold text-emerald-500 text-xs tracking-widest uppercase">3. FINISH</p>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script>
        // DỮ LIỆU CHUẨN ĐỒNG NHẤT (12 NGƯỜI)
        const rawData = [
            { id: "001", name: "Nguyễn Minh Tuấn", s: "08:00:00", cp: "08:15:20", f: "08:45:10", status: "Valid", dur: "00:45:10", seconds: 2710 },
            { id: "011", name: "Đỗ Mỹ Linh", s: "08:05:30", cp: "08:19:20", f: "08:50:10", status: "Valid", dur: "00:44:40", seconds: 2680 },
            { id: "004", name: "Phạm Bảo Nam", s: "08:01:20", cp: "08:14:00", f: "08:42:15", status: "Valid", dur: "00:40:55", seconds: 2455 },
            { id: "002", name: "Trần Thị Thanh", s: "08:00:15", cp: "08:16:10", f: "08:47:30", status: "Valid", dur: "00:47:15", seconds: 2835 },
            { id: "008", name: "Vũ Hải Đăng", s: "08:03:45", cp: "08:17:30", f: "08:55:20", status: "Valid", dur: "00:51:35", seconds: 3095 },
            { id: "005", name: "Hoàng Minh Thắng", s: "08:02:00", cp: "08:20:45", f: "09:05:10", status: "Valid", dur: "01:03:10", seconds: 3790 },
            { id: "007", name: "Bùi Anh Đức", s: "08:03:00", cp: "08:22:10", f: "09:12:00", status: "Valid", dur: "01:09:00", seconds: 4140 },
            { id: "010", name: "Phan Thanh Tùng", s: "08:05:00", cp: "08:25:00", f: "09:15:45", status: "Valid", dur: "01:10:45", seconds: 4245 },
            { id: "012", name: "Ngô Quốc Anh", s: "08:06:00", cp: "08:30:00", f: "09:30:00", status: "Valid", dur: "01:24:00", seconds: 5040 },
            // Vi phạm / Không hoàn thành
            { id: "003", name: "Lê Văn Hùng", s: "08:01:00", cp: "--:--:--", f: "08:50:00", status: "Warning", dur: "00:49:00", seconds: 2940 },
            { id: "006", name: "Đặng Thu Thảo", s: "08:02:30", cp: "08:18:00", f: "--:--:--", status: "DNF", dur: "--:--:--", seconds: 99999 },
            { id: "009", name: "Trịnh Công Sơn", s: "08:04:00", cp: "--:--:--", f: "--:--:--", status: "DNF", dur: "--:--:--", seconds: 99999 }
        ];

        function showSection(id) {
            ['dashboard', 'participants', 'qr-view'].forEach(s => {
                document.getElementById('sec-' + s).classList.add('hidden');
                document.getElementById('btn-' + s).classList.remove('nav-active', 'text-white');
                document.getElementById('btn-' + s).classList.add('text-slate-400');
            });
            document.getElementById('sec-' + id).classList.remove('hidden');
            document.getElementById('btn-' + id).classList.add('nav-active', 'text-white');
            document.getElementById('page-title').innerText = id === 'qr-view' ? 'Mã QR Hệ thống' : id.toUpperCase() + " OVERVIEW";
        }

        function initData() {
            const sorted = [...rawData].sort((a,b) => a.seconds - b.seconds);
            const validOnly = sorted.filter(p => p.status === "Valid");
            const violations = rawData.filter(p => p.status !== "Valid");

            // RENDER DASHBOARD TOP 5
            document.getElementById('top-5-list').innerHTML = validOnly.slice(0, 5).map((p, i) => `
                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100">
                    <div class="flex items-center"><span class="w-6 h-6 flex items-center justify-center bg-white shadow-sm rounded-lg font-bold text-indigo-600 text-[10px] mr-3">#${i+1}</span>
                    <span class="text-xs font-bold text-slate-700 uppercase italic">${p.name}</span></div>
                    <span class="font-mono font-bold text-indigo-600 text-xs tracking-tighter">${p.dur}</span>
                </div>
            `).join('');

            // RENDER NEXT 5
            document.getElementById('next-5-list').innerHTML = validOnly.slice(5, 10).map((p, i) => `
                <div class="flex items-center justify-between p-2 px-4 bg-white border-b border-slate-50">
                    <span class="text-[10px] font-bold text-slate-400">#${i+6} ${p.name}</span>
                    <span class="font-mono text-[10px] text-slate-400">${p.dur}</span>
                </div>
            `).join('');

            // RENDER VIOLATIONS (SCROLLABLE)
            document.getElementById('violation-list').innerHTML = violations.map(p => `
                <div class="p-4 bg-rose-50 rounded-2xl border border-rose-100 flex justify-between items-start">
                    <div>
                        <p class="font-bold text-rose-800 text-xs uppercase">${p.name}</p>
                        <p class="text-[10px] text-rose-500 mt-1 italic font-medium">${p.status === 'DNF' ? 'VĐV chưa về đích' : 'Cảnh báo: Bỏ mốc Checkpoint'}</p>
                    </div>
                    <span class="text-[9px] font-bold bg-white px-2 py-1 rounded-full text-rose-600 border border-rose-200">ID: ${p.id}</span>
                </div>
            `).join('') + `<div class="p-4 bg-slate-50 rounded-2xl border border-slate-100 text-center text-[10px] text-slate-400">--- Hết danh sách vi phạm ---</div>`;

            // RENDER FULL TABLE
            document.getElementById('full-table-body').innerHTML = rawData.map(p => `
                <tr class="hover:bg-indigo-50/30 transition">
                    <td class="p-5 px-8 font-mono text-slate-400">${p.id}</td>
                    <td class="p-5 font-bold text-slate-700 italic">${p.name}</td>
                    <td class="p-5 text-center font-mono">${p.s}</td>
                    <td class="p-5 text-center font-mono ${p.cp === '--:--:--' ? 'text-rose-500 font-bold bg-rose-50' : ''}">${p.cp}</td>
                    <td class="p-5 text-center font-mono ${p.f === '--:--:--' ? 'text-rose-500 font-bold bg-rose-50' : ''}">${p.f}</td>
                    <td class="p-5 text-right font-bold text-indigo-600">${p.dur}</td>
                    <td class="p-5 text-center">
                        <span class="px-3 py-1 rounded-full text-[9px] font-extrabold uppercase ${p.status === 'Valid' ? 'bg-emerald-100 text-emerald-600' : 'bg-rose-100 text-rose-600'}">${p.status}</span>
                    </td>
                </tr>
            `).join('');
        }

        function exportCSV() {
            alert("Đã kết xuất dữ liệu của 12 Vận động viên thành file Excel!");
        }

        window.onload = initData;
    </script>
</body>
</html>